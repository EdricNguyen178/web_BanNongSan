"use strict";(self.webpackChunkfarm_ui=self.webpackChunkfarm_ui||[]).push([[475],{3475:(vt,Z,c)=>{c.r(Z),c.d(Z,{ImportModule:()=>Mt});var s=c(7506),I=c(2495),v=c(7876),h=c(6814),T=c(2787),D=c(9626),S=c(5861),b=c(6593),N=c(7930),f=c(1221),U=c(8763),J=c(342),C=c(9275),O=c(8902),E=c(4597),q=c(7095),F=c(6574),Q=c(2897),k=c(5811),t=c(5879),B=c(2333),m=c(6223),w=c(3640),G=c(2840),V=c(855),H=c(1958),Y=c(2682),A=c(95),z=c(3599),L=c(2595),x=c(824),P=c(8373),M=c(9691),K=c(6494),p=c(9663),$=c(8276);function R(i,a){1&i&&t._UZ(0,"span",26)}function W(i,a){1&i&&t._UZ(0,"span",26)}function X(i,a){if(1&i&&t._UZ(0,"nz-option",27),2&i){const n=a.$implicit;t.Q6J("nzLabel",n.name)("nzValue",n.id)}}function j(i,a){if(1&i&&t._UZ(0,"nz-option",27),2&i){const n=a.$implicit;t.Q6J("nzLabel",n.name)("nzValue",n.id)}}function tt(i,a){if(1&i&&t._UZ(0,"nz-option",27),2&i){const n=a.$implicit;t.Q6J("nzLabel",n.name)("nzValue",n.id)}}function nt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",16)(4,"form",17)(5,"div",18)(6,"nz-form-item")(7,"nz-form-label"),t._uU(8,"M\xe3 S\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(9,"nz-input-group",19)(10,"input",20),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.EntitySearch.productCode=e)}),t.qZA()(),t.YNc(11,R,1,0,"ng-template",null,21,t.W1O),t.qZA()(),t.TgZ(13,"div",18)(14,"nz-form-item")(15,"nz-form-label"),t._uU(16,"T\xean S\u1ea3n Ph\u1ea9m"),t.qZA(),t.TgZ(17,"nz-input-group",19)(18,"input",20),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.EntitySearch.productName=e)}),t.qZA()(),t.YNc(19,W,1,0,"ng-template",null,21,t.W1O),t.qZA()(),t.TgZ(21,"div",18)(22,"nz-form-item")(23,"nz-form-label"),t._uU(24,"Danh m\u1ee5c"),t.qZA(),t.TgZ(25,"nz-select",22),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.EntitySearch.categoryId=e)}),t.YNc(26,X,1,2,"nz-option",23),t.qZA()()(),t.TgZ(27,"div",18)(28,"nz-form-item")(29,"nz-form-label"),t._uU(30,"Th\u01b0\u01a1ng hi\u1ec7u"),t.qZA(),t.TgZ(31,"nz-select",24),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.EntitySearch.brandId=e)}),t.YNc(32,j,1,2,"nz-option",23),t.qZA()()(),t.TgZ(33,"div",18)(34,"nz-form-item")(35,"nz-form-label"),t._uU(36,"S\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(37,"nz-select",25),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.EntitySearch.productId=e)}),t.YNc(38,tt,1,2,"nz-option",23),t.qZA()()()()()()()()}if(2&i){const n=t.MAs(12),o=t.oxw();t.xp6(3),t.Q6J("nzGutter",24),t.xp6(2),t.Q6J("nzSpan",6),t.xp6(4),t.Q6J("nzSuffix",n),t.xp6(1),t.Q6J("ngModel",o.EntitySearch.productCode),t.xp6(3),t.Q6J("nzSpan",6),t.xp6(4),t.Q6J("nzSuffix",n),t.xp6(1),t.Q6J("ngModel",o.EntitySearch.productName),t.xp6(3),t.Q6J("nzSpan",6),t.xp6(4),t.Q6J("ngModel",o.EntitySearch.categoryId),t.xp6(1),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("nzSpan",6),t.xp6(4),t.Q6J("ngModel",o.EntitySearch.brandId),t.xp6(1),t.Q6J("ngForOf",o.brands),t.xp6(1),t.Q6J("nzSpan",6),t.xp6(4),t.Q6J("ngModel",o.EntitySearch.productId),t.xp6(1),t.Q6J("ngForOf",o.products)}}function et(i,a){1&i&&t._UZ(0,"td")}function ot(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td",28),t.NdJ("nzCheckedChange",function(e){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.onItemChecked(l,e))}),t.qZA(),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"div",29)(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()()(),t.TgZ(10,"td"),t._UZ(11,"img",30),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"input",31),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"date"),t.qZA(),t.YNc(26,et,1,0,"td",32),t.qZA()}if(2&i){const n=a.$implicit,o=a.index,e=t.oxw();let r,l,u,_,d;t.Tol(n.isSoftDeleted?"bg_deleted":""),t.xp6(1),t.Q6J("nzChecked",e.isCheckedById(n.id))("nzDisabled",!1)("nzLabel",e.hehe),t.xp6(2),t.Oqu(o+1),t.xp6(4),t.hij("#",null==(r=e.getProductById(n.productId))?null:r.code,""),t.xp6(2),t.Oqu(null==(l=e.getProductById(n.productId))?null:l.name),t.xp6(2),t.hYB("src","",e.URL_Upload,"/",null!==(u=null==(u=e.getProductById(n.productId))?null:u.image)&&void 0!==u?u:"","",t.LSH),t.xp6(2),t.Oqu(n.price),t.xp6(2),t.Oqu(n.value),t.xp6(2),t.Oqu(n.amount),t.xp6(2),t.s9C("value",n.color),t.xp6(2),t.Oqu(t.xi3(22,17,n.manufactureDate,null!==(_="dd/MM/yy hh:mm aa")&&void 0!==_?_:"")),t.xp6(3),t.Oqu(t.xi3(25,20,n.expireDate,null!==(d="dd/MM/yy hh:mm aa")&&void 0!==d?d:"")),t.xp6(2),t.Q6J("ngIf",n.isSoftDeleted)}}function it(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"ckeditor",35),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw(3);return t.KtG(r.Entity.description=e)}),t.qZA()}if(2&i){const n=t.oxw(3);t.Q6J("ngModel",n.Entity.description)("editor",n.Editor)}}function rt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",37),t.qZA(),t.TgZ(3,"td",38)(4,"a")(5,"span",39),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw(4);return t.KtG(l.deleteProductDescription(r.id))}),t.qZA()()()()}if(2&i){const n=a.$implicit;t.Tol(n.isSoftDeleted?"bg_deleted":""),t.xp6(2),t.Q6J("innerHTML",n.description,t.oJD)}}function at(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"nz-table",36,8)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"H\xe0nh \u0111\u1ed9ng"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,rt,6,3,"tr",11),t.qZA()(),t.BQk()),2&i){const n=t.MAs(2),o=t.oxw(3);t.xp6(1),t.Q6J("nzData",o.productDescriptions)("nzBordered",!0),t.xp6(9),t.Q6J("ngForOf",n.data)}}function ct(i,a){if(1&i&&(t.ynx(0),t.YNc(1,it,1,2,"ckeditor",34),t.YNc(2,at,11,3,"ng-container",32),t.BQk()),2&i){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isInsertDetail),t.xp6(1),t.Q6J("ngIf",!n.isInsertDetail)}}function lt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"button",40),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.handleCancel())}),t._uU(2,"\u0110\xf3ng"),t.qZA(),t.TgZ(3,"button",41),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.addProductDescription())}),t._uU(4,"X\xe1c nh\u1eadn"),t.qZA()()}}function ut(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"nz-modal",33),t.NdJ("nzVisibleChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.isDisplayDetail=e)})("nzOnCancel",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.handleCancel())}),t.YNc(1,ct,3,2,"ng-container",14),t.YNc(2,lt,5,0,"div",15),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("nzVisible",n.isDisplayDetail)("nzTitle","Chi ti\u1ebft")}}function dt(i,a){1&i&&(t.ynx(0),t.TgZ(1,"span",52),t._uU(2,"C\xf3"),t.qZA(),t.BQk())}function st(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1,"Kh\xf4ng"),t.qZA())}function pt(i,a){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"input",54),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw().$implicit;return t.KtG(r.quantity=e)}),t.qZA(),t.BQk()}if(2&i){const n=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("nzStatus",o.isNumValid(n.quantity)?"success":"error")("ngModel",n.quantity)("type","number")}}function _t(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"nz-input-number",55),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw().$implicit;return t.KtG(r.quantity=e)}),t.qZA()}if(2&i){const n=t.oxw().$implicit,o=t.oxw(2);t.Q6J("nzStatus",o.isNumValid(n.quantity)?"success":"error")("ngModel",n.quantity)("nzMin",1)("nzMax",1e4)("nzStep",1)("nzFormatter",o.formatterInt)("nzParser",o.parserInt)}}function mt(i,a){1&i&&t._UZ(0,"td")}function gt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",29)(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()()(),t.TgZ(9,"td"),t._UZ(10,"img",30),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t.YNc(19,dt,3,0,"ng-container",46),t.YNc(20,st,2,0,"ng-template",null,47,t.W1O),t.qZA(),t.TgZ(22,"td"),t._UZ(23,"input",31),t.qZA(),t.TgZ(24,"td")(25,"nz-switch",48),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.isNewItem=e)}),t.qZA()(),t.TgZ(26,"td")(27,"nz-date-picker",49),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.manufactureDate=e)}),t.qZA()(),t.TgZ(28,"td")(29,"nz-date-picker",49),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.expireDate=e)}),t.qZA()(),t.TgZ(30,"td")(31,"input",50),t.NdJ("ngModelChange",function(e){const l=t.CHM(n).$implicit;return t.KtG(l.priceIn=e)}),t.qZA()(),t.TgZ(32,"td"),t.YNc(33,pt,2,3,"ng-container",46),t.YNc(34,_t,1,7,"ng-template",null,51,t.W1O),t.qZA(),t.YNc(36,mt,1,0,"td",32),t.qZA()}if(2&i){const n=a.$implicit,o=a.index,e=t.MAs(21),r=t.MAs(35),l=t.oxw(2);let u,_,d;t.Tol(n.isSoftDeleted?"bg_deleted":""),t.xp6(2),t.Oqu(o+1),t.xp6(4),t.hij("#",null==(u=l.getProductById(n.productId))?null:u.code,""),t.xp6(2),t.Oqu(null==(_=l.getProductById(n.productId))?null:_.name),t.xp6(2),t.hYB("src","",l.URL_Upload,"/",null!==(d=null==(d=l.getProductById(n.productId))?null:d.image)&&void 0!==d?d:"","",t.LSH),t.xp6(2),t.Oqu(t.lcZ(13,26,n.price)),t.xp6(3),t.Oqu(n.amount),t.xp6(2),t.Oqu(n.unit),t.xp6(2),t.Q6J("ngIf",n.allowOdd)("ngIfElse",e),t.xp6(4),t.s9C("value",n.color),t.xp6(2),t.Q6J("ngModel",n.isNewItem),t.xp6(2),t.Q6J("nzDisabled",!n.isNewItem)("nzStatus",l.isDateValid(n.manufactureDate,n.expireDate)?"success":"error")("ngModel",n.manufactureDate),t.xp6(2),t.Q6J("nzDisabled",!n.isNewItem)("nzStatus",l.isDateValid(n.manufactureDate,n.expireDate)?"success":"error")("ngModel",n.expireDate),t.xp6(2),t.Q6J("nzStatus",l.isNumValid(n.priceIn)?"success":"error")("ngModel",n.priceIn)("type","number"),t.xp6(2),t.Q6J("ngIf",n.allowOdd&&1==n.allowOdd)("ngIfElse",r),t.xp6(3),t.Q6J("ngIf",n.isSoftDeleted)}}function ht(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div",56)(1,"div",57),t._uU(2,"Chi ph\xed v\u1eadn chuy\u1ec3n: "),t.qZA(),t.TgZ(3,"div",58)(4,"input",59),t.NdJ("ngModelChange",function(e){t.CHM(n);const r=t.oxw(2);return t.KtG(r.expenseShip=e)}),t.qZA()()()}if(2&i){const n=t.oxw(2);t.xp6(4),t.Q6J("nzStatus",n.isNumValid(n.expenseShip)?"success":"error")("ngModel",n.expenseShip)("type","number")}}function Ct(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",16)(2,"nz-table",42,8)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"STT"),t.qZA(),t.TgZ(8,"th",43),t._uU(9,"M\xe3, T\xean"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"\u1ea2nh"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Gi\xe1 b\xe1n"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"\u0110\u01a1n v\u1ecb"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Cho ph\xe9p b\xe1n l\u1ebb"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"M\xe0u s\u1eafc"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"S\u1ea3n ph\u1ea9m m\u1edbi"),t.qZA(),t.TgZ(24,"th",44),t._uU(25,"Ng\xe0y s\u1ea3n xu\u1ea5t"),t.qZA(),t.TgZ(26,"th",44),t._uU(27,"Ng\xe0y h\u1ebft h\u1ea1n"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Gi\xe1 nh\u1eadp"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,gt,37,28,"tr",11),t.qZA()()(),t.YNc(34,ht,5,3,"div",45),t.BQk()),2&i){const n=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("nzGutter",24),t.xp6(1),t.Q6J("nzData",o.importItemCreates),t.xp6(31),t.Q6J("ngForOf",n.data),t.xp6(1),t.Q6J("ngIf",o.importItemCreates.length>0)}}function ft(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"button",40),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.handleCancelModalSetOfChecked())}),t._uU(2,"\u0110\xf3ng"),t.qZA(),t.TgZ(3,"button",60),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.openConfirmImportModal())}),t._uU(4,"X\xe1c nh\u1eadn"),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(3),t.Q6J("disabled",!n.importItemCreates.length>0)}}function zt(i,a){1&i&&(t.ynx(0),t.TgZ(1,"h5",61),t._uU(2,"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n nh\u1eadp h\xe0ng ?"),t.qZA(),t._UZ(3,"i",62),t.BQk())}function xt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"button",40),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.handleCancelModalConfirmImport())}),t._uU(2,"\u0110\xf3ng"),t.qZA(),t.TgZ(3,"button",41),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.confirmImport())}),t._uU(4,"X\xe1c nh\u1eadn"),t.qZA()()}}function Zt(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"nz-modal",33),t.NdJ("nzVisibleChange",function(e){t.CHM(n);const r=t.oxw();return t.KtG(r.isDisplayConfirmImport=e)})("nzOnCancel",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.handleCancelModalConfirmImport())}),t.YNc(1,zt,4,0,"ng-container",14),t.YNc(2,xt,5,0,"div",15),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("nzVisible",n.isDisplayConfirmImport)("nzTitle","X\xe1c nh\u1eadn nh\u1eadp h\xe0ng")}}const Et=[{path:"",redirectTo:"import",pathMatch:"full"},{path:"import",component:D.k,data:{breadcrumbs:["main","import","import"]}},{path:"create",component:(()=>{var i;class a extends J.H{constructor(o,e,r,l,u,_,d,yt,y){super(C.k.get(s.b),C.k.get(f.Sf),C.k.get(b.Dx),C.k.get(Q.u),C.k.get(U._W)),this.authService=o,this.importService=e,this.categoryService=r,this.brandService=l,this.productService=u,this.productDescriptionService=_,this.productImageService=d,this.productAttributeService=yt,this.appConfig=y,this.products=[],this.Editor=N,this.EntityDescription=new q.S,this.checked=!1,this.setOfChecked=[],this.isDisplaySetOfCheck=!1,this.isDisplayConfirmImport=!1,this.importCreate=new O.Ms,this.importItemCreates=[],this.formatterInt=g=>`${isNaN(g)?"0":Math.round(g)}`,this.parserInt=g=>g??"0",this.userInfo=new F.wu,this.columnSort={name:"Name",sortOrder:null,sortFn:(g,It)=>(this.getProductById(g.productId)?.name??"").localeCompare(this.getProductById(It.productId)?.name??""),listOfFilter:[],filterFn:null},this.Entity=new E.mE,this.EntitySearch=new E.OW,this.Entities=new Array,this.URL="productattribute",this.URL_Upload=y.URL_UPLOAD,this.title.setTitle("S\u1ea3n ph\u1ea9m"),this.field_Validation={name:!1,categoryId:!1,brandId:!1},this.GROUP_BUTTON.FILTER=!0,this.GROUP_BUTTON.RELOAD=!0,this.GROUP_BUTTON.SEARCH=!0,this.getList(),this.getListFilter(),this.userInfo=this.authService.getUserInfo()}ngOnInit(){}getProductById(o){return o&&this.products.length>0?this.products.find(r=>r.id==o)??null:null}displayFilter(){this.isFilter=!this.isFilter,this.EntitySearch={isExpired:"1"},this.getList()}getListFilter(){this.categoryService.getAll("category/get-sub-categories").subscribe(o=>{this.categories=o.data}),this.brandService.getByRequest("brand",{}).subscribe(o=>{this.brands=o.data}),this.productService.getByRequest("product",{}).subscribe(o=>{this.products=o.data})}onSubmit(){var o=this;return(0,S.Z)(function*(){return o.onSubmitting=!0,o.isSubmit?(o.save(),!0):(o.toastr.warning("D\u1eef li\u1ec7u nh\u1eadp ch\u01b0a h\u1ee3p l\u1ec7"),!1)})()}openSetOfCheckedModal(){this.isDisplaySetOfCheck=!0;let o=[...this.importItemCreates];this.importItemCreates=this.setOfChecked.map(e=>({productAttributeId:e.id,quantity:o.find(r=>r.productAttributeId==e.id)?.quantity,priceIn:o.find(r=>r.productAttributeId==e.id)?.priceIn,productId:e.productId,code:e.code,price:e.price,amount:e.amount,image:e.image,color:e.color,unit:e.unit,value:e.value,manufactureDate:e.manufactureDate,expireDate:e.expireDate,allowOdd:e.allowOdd,isNewItem:!1}))}openConfirmImportModal(){this.isNumValid(this.expenseShip)&&!this.importItemCreates.some(e=>!e.productAttributeId||!this.isNumValid(e.priceIn)||!this.isNumValid(e.quantity)||!this.isNumValid(e.quantity)||!this.isDateValid(e.manufactureDate,e.expireDate)&&e.isNewItem)?this.isDisplayConfirmImport=!0:this.toastr.error("D\u1eef li\u1ec7u nh\u1eadp ch\u01b0a h\u1ee3p l\u1ec7")}isNumValid(o){const e=parseFloat(o);return!isNaN(e)&&e>0}isDateValid(o,e){if(o&&e){const r=new Date(o),l=new Date(e);if(!isNaN(r.getTime())&&!isNaN(l.getTime()))return r.setHours(0,0,0,0),l.setHours(0,0,0,0),r<l}return!1}handleCancelModalSetOfChecked(){this.isDisplaySetOfCheck=!1}handleCancelModalConfirmImport(){this.isDisplayConfirmImport=!1}confirmImport(){this.importCreate.userAccountId=this.userInfo?.id,this.importCreate.listItem=this.importItemCreates.filter(o=>(o.allowOdd||(o.quantity=Math.round(o.quantity)),!0)),this.importCreate.total=this.importItemCreates.reduce((o,e)=>{const r=parseFloat(e.priceIn),l=parseFloat(e.quantity);return o+(isNaN(r)?0:r)*(isNaN(l)?0:l)},0),this.importCreate.expenseShip=this.expenseShip,this.importService.save("import",this.importCreate).subscribe(o=>{"200"==o.code?(this.toastr.success("Nh\u1eadp h\xe0ng th\xe0nh c\xf4ng!"),this.getList(),this.refreshCheckedStatus(),this.handleCancelModalSetOfChecked(),this.handleCancelModalConfirmImport()):this.toastr.warning(o.messageEX?.toString())})}getProductDescriptions(o){this.id_record=o,this.productDescriptionService.getById(`ProductDescription?ProductId=${o}`).subscribe(e=>{this.productDescriptions=e.data})}deleteProductDescription(o){this.productDescriptionService.delete(`ProductDescription/${o}`).subscribe(e=>{this.getProductDescriptions(this.id_record)})}onAllChecked(o){this.Entities.forEach(e=>this.updateCheckedSet(e,o))}onItemChecked(o,e){this.updateCheckedSet(o,e)}refreshCheckedStatus(){this.setOfChecked=[],this.importItemCreates=[]}updateCheckedSet(o,e){e?this.setOfChecked.some(r=>r.id==o.id)||this.setOfChecked.push(o):this.setOfChecked=this.setOfChecked.filter(r=>r.id!=o.id)}isCheckedById(o){return this.setOfChecked.some(e=>e.id==o)}}return(i=a).\u0275fac=function(o){return new(o||i)(t.Y36(B.e),t.Y36(s.b),t.Y36(s.b),t.Y36(s.b),t.Y36(s.b),t.Y36(s.b),t.Y36(s.b),t.Y36(s.b),t.Y36(k.X))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-import-create"]],features:[t.qOj],decls:40,vars:15,consts:[[3,"GROUP_BUTTON","searchEvent","filterEvent"],["class","content cus-body",4,"ngIf"],[1,"content","cus-body"],[1,"card"],[1,"card-body"],["nzShowZero","",1,"float-right",3,"nzCount","nzOverflowCount"],["nz-button","",1,"btn","my-2",3,"nzType","click"],[3,"nzData","nzBordered","nzLoading"],["basicTable",""],["nzLabel","Ch\u1ecdn t\u1ea5t c\u1ea3",3,"nzChecked","nzCheckedChange"],[3,"nzSortFn"],[3,"class",4,"ngFor","ngForOf"],[3,"nzVisible","nzTitle","nzVisibleChange","nzOnCancel",4,"ngIf"],["nzTitle","Danh s\xe1ch s\u1ea3n ph\u1ea9m \u0111\xe3 ch\u1ecdn",3,"nzVisible","nzWidth","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzGutter"],["nz-form","","nzLayout","vertical","nz-row",""],["nz-col","",3,"nzSpan"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Nh\u1eadp t\xecm ki\u1ebfm",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["nzShowSearch","","nzAllowClear","","nz-input","","nzPlaceHolder","Ch\u1ecdn danh m\u1ee5c",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nz-input","","nzPlaceHolder","Ch\u1ecdn th\u01b0\u01a1ng hi\u1ec7u",3,"ngModel","ngModelChange"],["nzShowSearch","","nzAllowClear","","nz-input","","nzPlaceHolder","Ch\u1ecdn s\u1ea3n ph\u1ea9m",3,"ngModel","ngModelChange"],["nz-icon","","nzType","search"],[3,"nzLabel","nzValue"],[3,"nzChecked","nzDisabled","nzLabel","nzCheckedChange"],[1,"d-flex","flex-column","py-0"],[1,"img_logo",3,"src"],["type","color","disabled","true",3,"value"],[4,"ngIf"],[3,"nzVisible","nzTitle","nzVisibleChange","nzOnCancel"],[3,"ngModel","editor","ngModelChange",4,"ngIf"],[3,"ngModel","editor","ngModelChange"],[3,"nzData","nzBordered"],[3,"innerHTML"],[2,"width","75px !important"],["nz-icon","","nzType","delete","nzTheme","outline",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],[3,"nzData"],[2,"min-width","120px"],[2,"min-width","130px"],["nz-row","","class","my-2",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["nzCheckedChildren","","nzUnCheckedChildren","",3,"ngModel","ngModelChange"],[1,"w-100",3,"nzDisabled","nzStatus","ngModel","ngModelChange"],["nz-input","","placeholder","Gi\xe1 nh\u1eadp",3,"nzStatus","ngModel","type","ngModelChange"],["elseTemplate1",""],[1,"badge","badge-success"],[1,"badge","badge-danger"],["nz-input","","placeholder","S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp",3,"nzStatus","ngModel","type","ngModelChange"],["placeholder","S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp",1,"w-100",3,"nzStatus","ngModel","nzMin","nzMax","nzStep","nzFormatter","nzParser","ngModelChange"],["nz-row","",1,"my-2"],["nz-col","","nzSpan","6","nzOffset","12"],["nz-col","","nzSpan","6"],["nz-input","","placeholder","Chi ph\xed v\u1eadn chuy\u1ec3n",3,"nzStatus","ngModel","type","ngModelChange"],["nz-button","","nzType","primary",3,"disabled","click"],[1,"text-center"],["aria-hidden","true",1,"trash-icon","fa","fa-trash"]],template:function(o,e){if(1&o&&(t.TgZ(0,"app-group-button",0),t.NdJ("searchEvent",function(){return e.search()})("filterEvent",function(){return e.displayFilter()}),t.qZA(),t.YNc(1,nt,39,16,"section",1),t.TgZ(2,"section",2)(3,"div",3)(4,"div",4)(5,"div")(6,"nz-badge",5)(7,"button",6),t.NdJ("click",function(){return e.openSetOfCheckedModal()}),t.TgZ(8,"span"),t._uU(9,"D\xe1nh s\xe1ch \u0111\xe3 ch\u1ecdn"),t.qZA()()()(),t.TgZ(10,"nz-table",7,8)(12,"thead")(13,"tr")(14,"th",9),t.NdJ("nzCheckedChange",function(l){return e.onAllChecked(l)}),t.qZA(),t.TgZ(15,"th"),t._uU(16,"STT"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"M\xe3, T\xean"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"\u1ea2nh"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Gi\xe1 b\xe1n"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Gi\xe1 nh\u1eadp"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"M\xe0u s\u1eafc"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Ng\xe0y s\u1ea3n xu\u1ea5t"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Ng\xe0y h\u1ebft h\u1ea1n"),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,ot,27,23,"tr",11),t.qZA()()()()(),t.YNc(35,ut,3,2,"nz-modal",12),t.TgZ(36,"nz-modal",13),t.NdJ("nzVisibleChange",function(l){return e.isDisplaySetOfCheck=l})("nzOnCancel",function(){return e.handleCancelModalSetOfChecked()}),t.YNc(37,Ct,35,4,"ng-container",14),t.YNc(38,ft,5,1,"div",15),t.qZA(),t.YNc(39,Zt,3,2,"nz-modal",12)),2&o){const r=t.MAs(11);t.Q6J("GROUP_BUTTON",e.GROUP_BUTTON),t.xp6(1),t.Q6J("ngIf",e.isFilter),t.xp6(5),t.Q6J("nzCount",e.setOfChecked.length)("nzOverflowCount",199),t.xp6(1),t.Q6J("nzType","primary"),t.xp6(3),t.Q6J("nzData",e.Entities)("nzBordered",!0)("nzLoading",0==e.products.length),t.xp6(4),t.Q6J("nzChecked",e.checked),t.xp6(3),t.Q6J("nzSortFn",e.columnSort.sortFn),t.xp6(17),t.Q6J("ngForOf",r.data),t.xp6(1),t.Q6J("ngIf",e.isDisplayDetail),t.xp6(1),t.Q6J("nzVisible",e.isDisplaySetOfCheck)("nzWidth",1400),t.xp6(3),t.Q6J("ngIf",e.isDisplayConfirmImport)}},dependencies:[h.sg,h.O5,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,w.x7,G.ix,V.w,H.dQ,Y.uw,A.t3,A.SK,z.Lr,z.Nx,z.iK,L.Ls,x.Zp,x.gB,x.ke,P._V,f.du,f.Uh,f.Hf,M.Ip,M.Vq,K.i,p.N8,p.qD,p.Uo,p._C,p.h7,p.Om,p.p0,p.$Z,p.g6,$.W,h.JJ,h.uU]}),a})(),data:{breadcrumbs:["main","import","create"]}}];let At=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(Et),T.Bz]}),a})(),Mt=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[s.b],imports:[h.ez,At,I.g,v.d]}),a})()}}]);